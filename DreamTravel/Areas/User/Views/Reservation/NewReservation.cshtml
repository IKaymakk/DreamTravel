@model EntityLayer.Concrete.Reservation
@{
    ViewData["Title"] = "NewReservation";
    Layout = "~/Views/Shared/UserLayout.cshtml";
}
<h3>Rezervasyon Yap</h3>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="~/Scripts/jquery-3.4.1.js"></script>
<link rel="stylesheet" href="https://unpkg.com/sweetalert/dist/sweetalert.min.css">
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<form id="reservationForm" style="width:98%" method="post">
    <div class="form-group">
        <label>Rotalar</label>
        <select asp-for="DestinationID" class="form-control" asp-items="ViewBag.v" required>
            <option value="">Nereye Gitmek İstiyorsunuz?</option>
        </select>
    </div>
    <div class="form-group">
        <label>Kişi Sayısı</label>
        <input type="text" asp-for="PersonCount" class="form-control" />
    </div>
    <div style="width:20%" class="form-group">
        <label>Tarih</label>
        <input type="date" asp-for="ReservationDate" class="form-control" />
    </div>
    <div class="form-group">
        <label>Eklemek İstedikleriniz</label>
        <textarea type="text" asp-for="Description" class="form-control"></textarea>
    </div>
    <button type="submit" class="xxx btn bg-gradient-primary">Rezervasyon Yap</button>

</form>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    $(document).ready(function () {
        $('.xxx').click(function (event) {
            event.preventDefault(); // Formun varsayılan gönderme davranışını durdur

            var isValid = true;
            var errorMessage = '';

            // DestinationID kontrolü
            var destinationSelect = document.getElementById('DestinationID');
            var personCount = document.getElementById('PersonCount');
            var reservationDate = document.getElementById('ReservationDate');

            if (destinationSelect.value === "") {
                isValid = false;
                errorMessage += 'Lütfen bir rota seçiniz.\n';
            }
            if (personCount.value === "") {
                isValid = false;
                errorMessage += 'Lütfen kişi sayısını giriniz.\n';
            }
            if (reservationDate.value === "") {
                isValid = false;
                errorMessage += 'Lütfen tarihi giriniz.\n';
            }


            if (isValid) {
                Swal.fire({
                    title: 'Rezervasyon Oluşturulsun mu?',
                    text: 'Rezervasyonunuz onay aşamasına geçecektir, onaylandığı durumda sizinle iletişime geçeceğiz',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Oluştur',
                    cancelButtonText: 'İptal',
                    confirmButtonColor: '#28a745', // Yeşil renk
                    cancelButtonColor: '#d33' // Kırmızı renk
                }).then((result) => {
                    if (result.isConfirmed) {
                        $('#reservationForm').submit();
                    }
                });
            } else {
                Swal.fire({
                    title: 'Hata',
                    text: errorMessage,
                    icon: 'error',
                    confirmButtonText: 'Tamam',
                    confirmButtonColor: '#d33' // Kırmızı renk
                });
            }
        });
    });

</script>